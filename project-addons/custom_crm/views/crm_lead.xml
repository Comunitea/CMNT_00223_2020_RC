<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="crm_custom_crm_case_kanban_view_leads" model="ir.ui.view">
        <field name="name">crm.custom.crm.case.kanban.view.leads</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_kanban_view_leads"/>
        <field name="arch" type="xml">
            <field name="activity_state" position="after">
                <field name="partner_ref"/>
                <field name="partner_category_id"/>
                <field name="partner_image_small"/>
                <field name="partner_parent_id"/>
                <field name="partner_is_company"/>
                <field name="partner_type"/>
                <field name="partner_display_name"/>
            </field>
            <xpath expr="//t[@t-name='kanban-box']" position="replace">
                <t t-name="kanban-box">
                    <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">
                        <t t-if="record.partner_image_small.raw_value and !record.partner_is_company.raw_value">
                            <div class="o_kanban_image_fill_left d-none d-md-block" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_medium', record.partner_id.raw_value)}')">
                                <img class="o_kanban_image_inner_pic" t-if="record.partner_parent_id.raw_value" t-att-alt="record.partner_parent_id.value" t-att-src="kanban_image('res.partner', 'image_small', record.partner_parent_id.raw_value)"/>
                            </div>
                            <div class="o_kanban_image rounded-circle d-md-none" t-attf-style="background-image:url('#{kanban_image('res.partner', 'image_small', record.partner_id.raw_value)}')">
                                <img class="o_kanban_image_inner_pic" t-if="record.partner_parent_id.raw_value" t-att-alt="record.partner_parent_id.value" t-att-src="kanban_image('res.partner', 'image_small', record.partner_parent_id.raw_value)"/>
                            </div>
                        </t>
                        <t t-elif="record.partner_image_small.raw_value and record.partner_is_company.raw_value">
                            <img class="o_kanban_image" t-att-src="kanban_image('res.partner', 'image_small', record.partner_id.raw_value)" t-att-alt="record.partner_display_name"/>
                        </t>
                        <t t-else="">
                            <t t-if="record.partner_type.raw_value === 'delivery'">
                                <img alt="Delivery" t-att-src='_s + "/base/static/img/truck.png"' class="o_kanban_image oe_kanban_avatar_smallbox"/>
                            </t>
                            <t t-if="record.partner_type.raw_value === 'invoice'">
                                <img alt="Invoice" t-att-src='_s + "/base/static/img/money.png"' class="o_kanban_image oe_kanban_avatar_smallbox"/>
                            </t>
                            <t t-if="record.partner_type.raw_value != 'invoice' and record.partner_type.raw_value != 'delivery'">
                                <t t-if="record.partner_is_company.raw_value === true">
                                    <img class="o_kanban_image" alt="Logo" t-att-src='_s + "/base/static/img/company_image.png"'/>
                                </t>
                                <t t-if="record.partner_is_company.raw_value === false">
                                    <img class="o_kanban_image" alt="Avatar" t-att-src='_s + "/base/static/img/avatar.png"'/>
                                </t>
                            </t>
                        </t>
                        <div class="oe_kanban_details">
                            <div>
                                <strong class="o_kanban_record_title"><span><field name="name"/></span></strong>
                            </div>
                            <div>
                                <span class="o_kanban_record_subtitle"><field name="contact_name"/></span>
                            </div>
                            <div>
                                <field name="tag_ids"/>
                            </div>
                            <div class="o_kanban_record_bottom">
                                <div class="oe_kanban_bottom_left">
                                    <field name="priority" widget="priority"/>
                                    <t t-if="record.message_needaction_counter.raw_value">
                                        <span role="alert" class="oe_kanban_mail_new" title="Unread Messages"><i class="fa fa-comments" aria-label="Messages" role="img"/><t t-raw="record.message_needaction_counter.raw_value"/></span>
                                    </t>
                                    <div class="o_kanban_inline_block">
                                        <field name="activity_ids" widget="kanban_activity"/>
                                    </div>
                                </div>
                                <div class="oe_kanban_bottom_right">
                                    <img t-att-src="kanban_image('res.users', 'image_small', record.user_id.raw_value)" t-att-title="record.user_id.value" t-att-alt="record.user_id.value" width="24" height="24" class="oe_kanban_avatar float-right"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </xpath>
        </field>
    </record>

    <record id="crm_custom_crm_case_tree_view_oppor" model="ir.ui.view">
        <field name="name">crm.custom.crm.case.tree.view.oppor</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_oppor"/>
        <field name="arch" type="xml">
            <xpath expr="//tree/field[@name='country_id']" position="after">
                <field name="priority"/>
                <field name="type"/>
                <field name="state_id"/>
            </xpath>
            <xpath expr="//tree/field[@name='country_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>

    <record id="crm_custom_crm_case_form_view_oppor" model="ir.ui.view">
        <field name="name">crm.custom.crm.case.form.view.oppor</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
        <field name="arch" type="xml">
            <field name="partner_id" position="before">
                <field name="partner_image_small" widget='image' class="oe_avatar" readonly="1" options='{"preview_image": "partner_image_small"}'/>
            </field>
            <field name="partner_id" position="after">
                <field name="partner_ref" readonly="1"/>
                <field name="partner_category_id" widget="many2many_tags" readonly="1"/>
            </field>
        </field>
    </record>

</odoo>
